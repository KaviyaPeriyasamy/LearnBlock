#!/usr/bin/env bash
x=$1



DESKTOP_DIR=$(xdg-user-dir DESKTOP)
echo $DESKTOP_DIR

A="install"
B="uninstall"
# path=$(dirname "$0")
path=$(pwd)

if [ "$(id -u)" -eq "0" ]; then
   echo "This script mustn't be run as root" 1>&2
   exit 1
fi

if [ -z ${x} ]
then
  echo You must specify an argument install or uninstall.
elif [ $1 = "install" ]
then
  echo Installing dependencies
  echo "" > files.txt
  echo Installing Learnblock
  gksudo pip install paramiko gitpython
  gksudo python setup.py install
  # gksudo pip install paramiko gitpython && python setup.py install --record files.txt
  cat files.txt
  echo Completed install successfully
  # echo [Desktop Entry]'\n'Version=1.0'\n'Type=Application'\n'Name=Learnblock'\n'Exec=python main.py'\n'Icon=$path/learnbot_dsl/learnbotCode/ico.png'\n'Path=$path/learnbot_dsl/learnbotCode/'\n'Terminal=false'\n'StartupNotify=false'\n' > $DESKTOP_DIR/Learnblock.desktop
  echo [Desktop Entry]'\n'Version=1.0'\n'Type=Application'\n'Name=Learnblock'\n'Comment='\n'Exec=python main.py'\n'Icon=$path/learnbot_dsl/learnbotCode/ico.png'\n'Path=$path/learnbot_dsl/learnbotCode'\n'Terminal=false'\n'StartupNotify=false > $path/Learnblock.desktop
  echo [Desktop Entry]'\n'Version=1.0'\n'Type=Application'\n'Name=Learnblock'\n'Comment='\n'Exec=python main.py'\n'Icon=$path/learnbot_dsl/learnbotCode/ico.png'\n'Path=$path/learnbot_dsl/learnbotCode'\n'Terminal=false'\n'StartupNotify=false > $DESKTOP_DIR/Learnblock.desktop

  chmod +x startLearnblock.sh
elif [ $1 = "uninstall" ]
then
  echo Unnstalling Learnblock
  gksu cat files.txt | xargs rm -rf
  gksu rm files.txt
  echo Completed uninstall successfully
else
  echo You must specify an argument install or uninstall.
fi
